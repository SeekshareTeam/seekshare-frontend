schema: ${NEXT_PUBLIC_SERVER_API_URL}
documents: ./src/**/*.graphql.*
overwrite: true
generates:
  ./src/generated/types.ts:
    plugins:
      - typescript
    skipTypename: true

  ./src/generated/operations.ts:
    preset: import-types
    presetConfig:
      typesPath: ./types
    plugins:
      - typescript-operations
    config:
      skipTypename: true

  ./src/generated/apollo.ts:
    preset: import-types
    presetConfig:
      typesPath: ./operations
    plugins:
      - typescript-react-apollo
    config:
      skipTypename: true
      exportFragmentSpreadSubTypes: true
      documentMode: graphQLTag

  ./src/generated/page.tsx:
    config:
      documentMode: external
      importDocumentNodeExternallyFrom: ./apollo
      reactApolloVersion: 3
      withHooks: true
      contextType: 'ApolloClientContext'
      contextTypeRequired: true
      # withHOC: false
      # excludePatterns: 'getComments'
      # excludePatternsOptions: 'i'
      # customDataIdFromObjectName: 'test'
      # customDataIdFromObjectImport: 'abc'
      # apolloStateKey: '__APOLLO_STATE__'
      apolloClientInstanceImport: '../config/apollo/client'
    preset: import-types
    presetConfig:
      typesPath: ./operations
    plugins:
      - 'graphql-codegen-apollo-next-ssr'

hooks:
  afterAllFileWrite:
    - node ./scripts/modify_operations.js
    - node ./scripts/modify_apollo.js
